name: ğŸŒ Complete Website Static Deployment - All Pages

on:
  push:
    branches: [ main ]
  workflow_dispatch:

permissions:
  contents: write
  pages: write
  id-token: write

jobs:
  generate-all-static-pages:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout repository
      uses: actions/checkout@v4
      with:
        token: ${{ secrets.GITHUB_TOKEN }}
        
    - name: Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '18'
        
    - name: Install dependencies
      run: |
        npm init -y
        npm install markdown-it cheerio fs-extra
        
    - name: Create static page generator script
      run: |
        cat > generate-static-pages.js << 'EOF'
        const fs = require('fs-extra');
        const path = require('path');
        const MarkdownIt = require('markdown-it');
        const md = new MarkdownIt({ html: true });

        // è®€å– Markdown æª”æ¡ˆä¸¦è½‰æ›ç‚º HTML
        function readMarkdownFile(filePath) {
          try {
            const content = fs.readFileSync(filePath, 'utf8');
            // ç§»é™¤ frontmatter å¦‚æœå­˜åœ¨
            const cleanContent = content.replace(/^---[\s\S]*?---\n/, '');
            return md.render(cleanContent);
          } catch (error) {
            console.log(`Warning: Could not read ${filePath}`);
            return '<p>å…§å®¹è¼‰å…¥ä¸­...</p>';
          }
        }

        // ç”Ÿæˆå®Œæ•´çš„ HTML é é¢
        function generateHTMLPage(title, description, content, canonical, type = 'article') {
          const schemaType = type === 'tool' ? 'TechArticle' : 'Article';
          
          return `<!DOCTYPE html>
        <html lang="zh-TW">
        <head>
          <meta charset="UTF-8">
          <title>${title} | AIOGEO çŸ¥è­˜åº«</title>
          <meta name="description" content="${description}">
          <meta name="viewport" content="width=device-width, initial-scale=1.0">
          <link rel="canonical" href="${canonical}">
          
          <!-- Open Graph Meta Tags -->
          <meta property="og:title" content="${title} | AIOGEO çŸ¥è­˜åº«">
          <meta property="og:description" content="${description}">
          <meta property="og:type" content="article">
          <meta property="og:url" content="${canonical}">
          <meta property="og:site_name" content="AIOGEO çŸ¥è­˜åº«">
          
          <!-- Schema.org çµæ§‹åŒ–æ¨™è¨˜ -->
          <script type="application/ld+json">
          {
            "@context": "https://schema.org",
            "@type": "${schemaType}",
            "headline": "${title}",
            "description": "${description}",
            "author": {
              "@type": "Person",
              "name": "å»–å¤©ä½‘ Bless Liao"
            },
            "publisher": {
              "@type": "Organization",
              "name": "AIOGEO çŸ¥è­˜åº«"
            },
            "datePublished": "2025-07-07",
            "mainEntityOfPage": "${canonical}",
            "keywords": ["GEO", "ç”Ÿæˆå¼å¼•æ“å„ªåŒ–", "AIæœå°‹", "å…§å®¹å„ªåŒ–"]
          }
          </script>
          
          <style>
            body {
              font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
              line-height: 1.7;
              max-width: 900px;
              margin: 0 auto;
              padding: 20px;
              color: #1f2937;
              background: #f8fafc;
            }
            .container {
              background: white;
              padding: 40px;
              border-radius: 12px;
              box-shadow: 0 4px 12px rgba(0,0,0,0.1);
              margin-bottom: 20px;
            }
            h1 { 
              color: #6366f1; 
              border-bottom: 3px solid #6366f1; 
              padding-bottom: 15px; 
              margin-bottom: 30px;
            }
            h2 { 
              color: #374151; 
              margin-top: 35px; 
              margin-bottom: 20px;
              border-left: 4px solid #6366f1;
              padding-left: 15px;
            }
            h3 { 
              color: #4b5563; 
              margin-top: 25px;
            }
            .summary {
              background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
              border: 2px solid #0ea5e9;
              border-radius: 12px;
              padding: 24px;
              margin: 25px 0;
              font-size: 1.05em;
              line-height: 1.6;
            }
            .summary::before {
              content: "ğŸ“– å…§å®¹æ‘˜è¦";
              display: block;
              font-weight: bold;
              margin-bottom: 12px;
              color: #0369a1;
              font-size: 0.9em;
            }
            code {
              background: #f1f5f9;
              padding: 2px 6px;
              border-radius: 4px;
              font-family: 'Monaco', 'Consolas', monospace;
            }
            pre {
              background: #1e293b;
              color: #e2e8f0;
              padding: 20px;
              border-radius: 8px;
              overflow-x: auto;
            }
            pre code {
              background: none;
              padding: 0;
              color: inherit;
            }
            table {
              width: 100%;
              border-collapse: collapse;
              margin: 20px 0;
            }
            th, td {
              border: 1px solid #e5e7eb;
              padding: 12px;
              text-align: left;
            }
            th {
              background: #f9fafb;
              font-weight: 600;
              color: #374151;
            }
            blockquote {
              border-left: 4px solid #6366f1;
              padding-left: 20px;
              margin: 20px 0;
              background: #f8fafc;
              padding: 15px 20px;
              border-radius: 0 8px 8px 0;
            }
            ul, ol {
              padding-left: 25px;
            }
            li {
              margin: 8px 0;
            }
            .enhanced-link {
              background: #6366f1;
              color: white;
              padding: 12px 24px;
              border-radius: 8px;
              text-decoration: none;
              display: inline-block;
              margin: 10px 10px 10px 0;
              transition: background 0.3s;
            }
            .enhanced-link:hover { 
              background: #4f46e5; 
            }
            .toc {
              background: #f8fafc;
              border: 1px solid #e5e7eb;
              border-radius: 8px;
              padding: 20px;
              margin: 20px 0;
            }
            .toc h3 {
              margin-top: 0;
              color: #374151;
            }
            .nav-footer {
              background: #f8fafc;
              border-radius: 8px;
              padding: 25px;
              margin-top: 40px;
              text-align: center;
              border-top: 1px solid #e5e7eb;
            }
          </style>
        </head>
        <body>
          <div class="container">
            <main>
              ${content}
            </main>
            
            <footer class="nav-footer">
              <a href="https://bless25min.github.io/AIOGEO-Knowledge/#${canonical.split('.html')[0].replace('https://bless25min.github.io/AIOGEO-Knowledge', '')}" class="enhanced-link">
                ğŸ’¡ åœ¨äº’å‹•å¼ç•Œé¢ä¸­æ¢ç´¢æ›´å¤šåŠŸèƒ½
              </a>
              <a href="https://bless25min.github.io/AIOGEO-Knowledge/" class="enhanced-link">
                ğŸ  è¿”å›çŸ¥è­˜åº«é¦–é 
              </a>
              <p style="margin-top: 20px; color: #6b7280; font-size: 0.9em;">
                ğŸ“š AIOGEO çŸ¥è­˜åº« | ğŸ¯ è®“AIçœ‹è¦‹ä½ çš„å…§å®¹ | ğŸ“… ${new Date().toLocaleDateString('zh-TW')}
              </p>
            </footer>
          </div>
        </body>
        </html>`;
        }

        // æ–‡ç« åˆ—è¡¨é…ç½®
        const articles = [
          // GEO åŸºç¤ç³»åˆ—
          {
            file: 'posts/geo-fundamentals.md',
            output: 'geo-fundamentals.html',
            title: 'GEOåŸºç¤åŸç†å®Œæ•´æŒ‡å—ï¼šAIæœå°‹æ™‚ä»£çš„å…§å®¹å„ªåŒ–ç­–ç•¥',
            description: 'æ·±å…¥è§£æ GEO (ç”Ÿæˆå¼å¼•æ“å„ªåŒ–) åŸºç¤åŸç†ï¼Œæä¾›AIæœå°‹æ™‚ä»£çš„å…§å®¹å„ªåŒ–ç­–ç•¥èˆ‡å¯¦æˆ°æŠ€å·§ã€‚æ¶µè“‹ä¸‰å±¤èªç¾©å¯è¦‹æ€§æ¶æ§‹ã€äº”å¤§å¼•ç”¨æ½›åŠ›æŒ‡æ¨™å’Œå®Œæ•´å¯¦æ–½æ¡†æ¶ã€‚'
          },
          {
            file: 'posts/geo-fundamentals-index.md',
            output: 'geo-fundamentals-index.html',
            title: 'GEOåŸºç¤åŸç†ç³»åˆ—ç´¢å¼•',
            description: 'GEOåŸºç¤åŸç†å®Œæ•´å­¸ç¿’è·¯å¾‘ï¼Œå¾æ¦‚å¿µç†è§£åˆ°å¯¦æˆ°æ‡‰ç”¨çš„ç³»çµ±æ€§æŒ‡å—ã€‚'
          },
          {
            file: 'posts/geo-fundamentals-overview.md',
            output: 'geo-fundamentals-overview.html',
            title: 'GEOæ¦‚å¿µèˆ‡åŸç†ç¸½è¦½',
            description: 'GEOç”Ÿæˆå¼å¼•æ“å„ªåŒ–çš„åŸºæœ¬æ¦‚å¿µã€ç™¼å±•èƒŒæ™¯å’Œæ ¸å¿ƒåŸç†ä»‹ç´¹ã€‚'
          },
          {
            file: 'posts/geo-fundamentals-content-design.md',
            output: 'geo-fundamentals-content-design.html',
            title: 'å…§å®¹çµæ§‹åŒ–è¨­è¨ˆå¯¦æˆ°ï¼šæ‰“é€ AIå‹å–„çš„Answer Layer',
            description: 'æ·±å…¥è¬›è§£å¦‚ä½•è¨­è¨ˆAIå‹å–„çš„å…§å®¹çµæ§‹ï¼ŒåŒ…å«Answer Layerèªæ®µè¨­è¨ˆåŸç†ã€æ®µè½å„ªåŒ–æŠ€å·§å’ŒFAQæ¨¡çµ„æ¨™æº–æ ¼å¼ã€‚'
          },
          {
            file: 'posts/geo-fundamentals-technical.md',
            output: 'geo-fundamentals-technical.html',
            title: 'GEOæŠ€è¡“å¯¦ä½œæŒ‡å—ï¼šSchemaæ¨™è¨˜èˆ‡HTMLå„ªåŒ–',
            description: 'å®Œæ•´çš„GEOæŠ€è¡“å¯¦ä½œæŒ‡å—ï¼Œæ¶µè“‹Schema.orgçµæ§‹åŒ–æ¨™è¨˜ã€HTMLèªç¾©å„ªåŒ–å’ŒæŠ€è¡“SEOæœ€ä½³å¯¦å‹™ã€‚'
          },
          {
            file: 'posts/geo-fundamentals-measurement.md',
            output: 'geo-fundamentals-measurement.html',
            title: 'GEOæˆæ•ˆè©•ä¼°èˆ‡é‡åŒ–æŒ‡æ¨™',
            description: 'GEOå„ªåŒ–æ•ˆæœçš„è©•ä¼°æ–¹æ³•ï¼ŒåŒ…å«AIå¼•ç”¨ç‡ç›£æ§ã€èªç¾©å¯è¦‹æ€§æŒ‡æ¨™å’ŒROIè¨ˆç®—æ–¹å¼ã€‚'
          },
          
          // æ ¸å¿ƒç­–ç•¥æ–‡ç« 
          {
            file: 'posts/seo-geo-integration.md',
            output: 'seo-geo-integration.html',
            title: 'SEOÃ—GEOé›™è»Œæ•´åˆå¯¦æˆ°æŒ‡å—',
            description: 'SEOèˆ‡GEOé›™è»Œå„ªåŒ–ç­–ç•¥ï¼Œæ•´åˆå‚³çµ±æœå°‹å¼•æ“å„ªåŒ–èˆ‡AIå¼•ç”¨å„ªåŒ–çš„å®Œæ•´å¯¦æ–½æ¡†æ¶ã€‚'
          },
          {
            file: 'posts/answer-layer-design.md',
            output: 'answer-layer-design.html',
            title: 'Answer Layerèªæ®µè¨­è¨ˆå®Œæ•´æŒ‡å—',
            description: 'æ·±å…¥è§£æAnswer Layerè¨­è¨ˆåŸç†ï¼Œæä¾›AIå‹å–„çš„å…§å®¹æ¨¡çµ„åŒ–ç­–ç•¥å’Œå¯¦ä½œæŠ€å·§ã€‚'
          },
          {
            file: 'posts/semantic-anchoring.md',
            output: 'semantic-anchoring.html',
            title: 'èªç¾©éŒ¨å®šæŠ€è¡“ï¼šæå‡AIå…§å®¹è­˜åˆ¥ç²¾æº–åº¦',
            description: 'èªç¾©éŒ¨å®šæŠ€è¡“çš„è©³ç´°è§£æï¼ŒåŒ…å«ä¸»é¡Œèšç„¦ç­–ç•¥ã€èªç¾©æ¸…æ™°åº¦å„ªåŒ–å’Œå…§å®¹çµæ§‹è¨­è¨ˆã€‚'
          },
          {
            file: 'posts/semantic-mesh.md',
            output: 'semantic-mesh.html',
            title: 'Semantic Meshèªæ„çŸ©é™£ï¼šå»ºç«‹æ™ºæ…§å…§å®¹ç¶²çµ¡',
            description: 'Semantic Meshæ¶æ§‹è¨­è¨ˆå®Œæ•´æŒ‡å—ï¼Œå»ºç«‹ä¸»å¹¹é ã€å­ä¸»é¡Œé ã€å¾®å‹é ä¸‰å±¤å…§å®¹ç¶²çµ¡ã€‚'
          },
          
          // æŠ€è¡“å¯¦ä½œæ–‡ç« 
          {
            file: 'posts/schema-implementation.md',
            output: 'schema-implementation.html',
            title: 'Schema.orgçµæ§‹åŒ–æ¨™è¨˜å¯¦ä½œæŒ‡å—',
            description: 'å®Œæ•´çš„Schema.orgå¯¦ä½œæ•™å­¸ï¼Œæ¶µè“‹Articleã€FAQã€HowToç­‰å¤šç¨®æ¨™è¨˜é¡å‹å’Œæœ€ä½³å¯¦å‹™ã€‚'
          },
          {
            file: 'posts/faq-design.md',
            output: 'faq-design.html',
            title: 'FAQæ¨¡çµ„è¨­è¨ˆï¼šæå‡AIå¼•ç”¨å‹å–„åº¦',
            description: 'FAQæ¨¡çµ„çš„è¨­è¨ˆåŸç†å’Œå¯¦ä½œæ–¹æ³•ï¼ŒåŒ…å«å•ç­”çµæ§‹å„ªåŒ–å’ŒSchemaæ¨™è¨˜ç­–ç•¥ã€‚'
          },
          {
            file: 'posts/citation-enhancement.md',
            output: 'citation-enhancement.html',
            title: 'å¼•ç”¨æ½›åŠ›æå‡ç­–ç•¥ï¼šæ¬Šå¨æ€§èˆ‡å¯ä¿¡åº¦å»ºç«‹',
            description: 'æå‡å…§å®¹å¼•ç”¨æ½›åŠ›çš„ç­–ç•¥æ–¹æ³•ï¼ŒåŒ…å«æ¬Šå¨ä¾†æºå¼•ç”¨ã€å¯ä¿¡åº¦å»ºç«‹å’Œå°ˆå®¶è§€é»æ•´åˆã€‚'
          },
          
          // å¤šæ¨¡æ…‹å…§å®¹
          {
            file: 'posts/multimodal-optimization.md',
            output: 'multimodal-optimization.html',
            title: 'å¤šæ¨¡æ…‹å…§å®¹å„ªåŒ–ï¼šåœ–æ–‡å½±éŸ³å…¨æ–¹ä½ç­–ç•¥',
            description: 'å¤šæ¨¡æ…‹å…§å®¹çš„å„ªåŒ–ç­–ç•¥ï¼Œæ¶µè“‹åœ–åƒã€å½±ç‰‡ã€éŸ³é »ç­‰å¤šç¨®åª’é«”å½¢å¼çš„AIå‹å–„è¨­è¨ˆã€‚'
          },
          {
            file: 'posts/multimodal-creation.md',
            output: 'multimodal-creation.html',
            title: 'å¤šæ¨¡æ…‹å…§å®¹å‰µä½œå¯¦æˆ°æŠ€å·§',
            description: 'å¤šæ¨¡æ…‹å…§å®¹çš„å‰µä½œæ–¹æ³•å’Œå·¥å…·ä½¿ç”¨ï¼Œæä¾›åœ–è¡¨è¨­è¨ˆã€å½±ç‰‡è£½ä½œå’Œäº’å‹•å…§å®¹é–‹ç™¼æŒ‡å—ã€‚'
          },
          
          // AIç›¸é—œå°ˆæ¥­æ–‡ç« 
          {
            file: 'posts/ai-search-algorithm.md',
            output: 'ai-search-algorithm.html',
            title: 'AIæœå°‹æ¼”ç®—æ³•æ·±åº¦è§£æ',
            description: 'æ·±å…¥åˆ†æå„å¤§AIæœå°‹å¹³å°çš„æ¼”ç®—æ³•æ©Ÿåˆ¶ï¼ŒåŒ…å«ChatGPTã€Claudeã€Perplexityç­‰å¹³å°ç‰¹æ€§ã€‚'
          },
          {
            file: 'posts/ai-citation-tracking.md',
            output: 'ai-citation-tracking.html',
            title: 'AIå¼•ç”¨è¿½è¹¤èˆ‡ç›£æ§ç³»çµ±å»ºç«‹',
            description: 'å»ºç«‹AIå¼•ç”¨è¿½è¹¤ç³»çµ±çš„å®Œæ•´æŒ‡å—ï¼ŒåŒ…å«ç›£æ§å·¥å…·é¸æ“‡ã€æŒ‡æ¨™è¨­è¨ˆå’Œæ•ˆæœåˆ†ææ–¹æ³•ã€‚'
          },
          
          // æ¸¬é‡èˆ‡è©•ä¼°
          {
            file: 'posts/geo-measurement.md',
            output: 'geo-measurement.html',
            title: 'GEOæˆæ•ˆæ¸¬é‡èˆ‡è©•ä¼°å®Œæ•´æŒ‡å—',
            description: 'GEOå„ªåŒ–æˆæ•ˆçš„é‡åŒ–è©•ä¼°æ–¹æ³•ï¼ŒåŒ…å«æŒ‡æ¨™å®šç¾©ã€æ•¸æ“šæ”¶é›†å’Œåˆ†ææ¡†æ¶ã€‚'
          }
        ];

        // å·¥å…·é é¢é…ç½®
        const tools = [
          {
            file: 'tools/README.md',
            output: 'tools-overview.html',
            title: 'AIOGEOå·¥å…·èˆ‡è³‡æºç¸½è¦½',
            description: 'AIOGEOçŸ¥è­˜åº«æä¾›çš„å®Œæ•´å·¥å…·é›†åˆï¼ŒåŒ…å«è©•ä¼°å·¥å…·ã€æª¢æŸ¥æ¸…å–®ã€æ¨¡æ¿å’Œè³‡æºé€£çµã€‚',
            type: 'tool'
          },
          {
            file: 'tools/checklists.md',
            output: 'tools-checklists.html',
            title: 'GEOå„ªåŒ–æª¢æŸ¥æ¸…å–®',
            description: 'å®Œæ•´çš„GEOå„ªåŒ–æª¢æŸ¥æ¸…å–®ï¼Œæä¾›é€é …å°ç…§çš„å„ªåŒ–è¦é»å’Œå“è³ªæ¨™æº–ã€‚',
            type: 'tool'
          },
          {
            file: 'tools/content-templates.md',
            output: 'tools-content-templates.html',
            title: 'GEOå…§å®¹æ¨¡æ¿åº«',
            description: 'æ¨™æº–åŒ–çš„GEOå…§å®¹å‰µä½œæ¨¡æ¿ï¼ŒåŒ…å«æ–‡ç« æ¶æ§‹ã€FAQæ ¼å¼å’ŒSchemaæ¨™è¨˜ç¯„ä¾‹ã€‚',
            type: 'tool'
          },
          {
            file: 'tools/assessment-tools.md',
            output: 'tools-assessment.html',
            title: 'GEOè©•ä¼°å·¥å…·é›†',
            description: 'GEOæˆæ•ˆè©•ä¼°å·¥å…·é›†åˆï¼ŒåŒ…å«AIå¼•ç”¨ç›£æ§ã€èªç¾©åˆ†æå’Œæ•ˆæœè¿½è¹¤å·¥å…·ã€‚',
            type: 'tool'
          },
          {
            file: 'tools/schema-generator.md',
            output: 'tools-schema-generator.html',
            title: 'Schemaæ¨™è¨˜ç”Ÿæˆå™¨',
            description: 'è‡ªå‹•åŒ–Schema.orgæ¨™è¨˜ç”Ÿæˆå·¥å…·ï¼Œæ”¯æ´Articleã€FAQã€HowToç­‰å¤šç¨®æ¨™è¨˜é¡å‹ã€‚',
            type: 'tool'
          }
        ];

        // ç”Ÿæˆæ‰€æœ‰æ–‡ç« é é¢
        console.log('ğŸš€ é–‹å§‹ç”Ÿæˆéœæ…‹é é¢...');
        
        articles.forEach(article => {
          try {
            const content = readMarkdownFile(article.file);
            const canonical = `https://bless25min.github.io/AIOGEO-Knowledge/${article.output}`;
            const html = generateHTMLPage(article.title, article.description, content, canonical);
            fs.writeFileSync(article.output, html);
            console.log(`âœ… ç”Ÿæˆå®Œæˆ: ${article.output}`);
          } catch (error) {
            console.log(`âŒ ç”Ÿæˆå¤±æ•—: ${article.output} - ${error.message}`);
          }
        });

        // ç”Ÿæˆæ‰€æœ‰å·¥å…·é é¢
        tools.forEach(tool => {
          try {
            const content = readMarkdownFile(tool.file);
            const canonical = `https://bless25min.github.io/AIOGEO-Knowledge/${tool.output}`;
            const html = generateHTMLPage(tool.title, tool.description, content, canonical, tool.type);
            fs.writeFileSync(tool.output, html);
            console.log(`âœ… ç”Ÿæˆå®Œæˆ: ${tool.output}`);
          } catch (error) {
            console.log(`âŒ ç”Ÿæˆå¤±æ•—: ${tool.output} - ${error.message}`);
          }
        });

        console.log('ğŸ‰ æ‰€æœ‰éœæ…‹é é¢ç”Ÿæˆå®Œæˆï¼');
        EOF
        
    - name: Generate all static pages
      run: |
        node generate-static-pages.js
        
    - name: Generate comprehensive sitemap
      run: |
        cat > sitemap.xml << 'EOF'
        <?xml version="1.0" encoding="UTF-8"?>
        <urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
            <!-- ä¸»é é¢ -->
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>weekly</changefreq>
                <priority>1.0</priority>
            </url>
            
            <!-- æ ¸å¿ƒé é¢ -->
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/about.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>monthly</changefreq>
                <priority>0.9</priority>
            </url>
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/contributing.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>monthly</changefreq>
                <priority>0.8</priority>
            </url>
            
            <!-- GEO åŸºç¤ç³»åˆ—æ–‡ç«  -->
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/geo-fundamentals.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>weekly</changefreq>
                <priority>0.95</priority>
            </url>
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/geo-fundamentals-index.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>weekly</changefreq>
                <priority>0.9</priority>
            </url>
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/geo-fundamentals-overview.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>weekly</changefreq>
                <priority>0.9</priority>
            </url>
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/geo-fundamentals-content-design.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>weekly</changefreq>
                <priority>0.9</priority>
            </url>
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/geo-fundamentals-technical.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>weekly</changefreq>
                <priority>0.9</priority>
            </url>
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/geo-fundamentals-measurement.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>weekly</changefreq>
                <priority>0.9</priority>
            </url>
            
            <!-- æ ¸å¿ƒç­–ç•¥æ–‡ç«  -->
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/seo-geo-integration.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>weekly</changefreq>
                <priority>0.9</priority>
            </url>
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/answer-layer-design.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>weekly</changefreq>
                <priority>0.85</priority>
            </url>
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/semantic-anchoring.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>weekly</changefreq>
                <priority>0.85</priority>
            </url>
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/semantic-mesh.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>weekly</changefreq>
                <priority>0.85</priority>
            </url>
            
            <!-- æŠ€è¡“å¯¦ä½œæ–‡ç«  -->
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/schema-implementation.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>weekly</changefreq>
                <priority>0.8</priority>
            </url>
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/faq-design.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>weekly</changefreq>
                <priority>0.8</priority>
            </url>
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/citation-enhancement.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>weekly</changefreq>
                <priority>0.8</priority>
            </url>
            
            <!-- å¤šæ¨¡æ…‹å…§å®¹å„ªåŒ– -->
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/multimodal-optimization.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>weekly</changefreq>
                <priority>0.8</priority>
            </url>
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/multimodal-creation.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>weekly</changefreq>
                <priority>0.8</priority>
            </url>
            
            <!-- AI ç›¸é—œå°ˆæ¥­æ–‡ç«  -->
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/ai-search-algorithm.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>weekly</changefreq>
                <priority>0.8</priority>
            </url>
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/ai-citation-tracking.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>weekly</changefreq>
                <priority>0.75</priority>
            </url>
            
            <!-- æ¸¬é‡èˆ‡è©•ä¼° -->
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/geo-measurement.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>weekly</changefreq>
                <priority>0.75</priority>
            </url>
            
            <!-- å·¥å…·èˆ‡è³‡æºé é¢ -->
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/tools-overview.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>weekly</changefreq>
                <priority>0.8</priority>
            </url>
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/tools-checklists.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>weekly</changefreq>
                <priority>0.75</priority>
            </url>
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/tools-content-templates.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>weekly</changefreq>
                <priority>0.75</priority>
            </url>
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/tools-assessment.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>weekly</changefreq>
                <priority>0.75</priority>
            </url>
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/tools-schema-generator.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>weekly</changefreq>
                <priority>0.75</priority>
            </url>
        </urlset>
        EOF
        
        # æ›¿æ›æ—¥æœŸ
        sed -i "s/REPLACE_DATE/$(date +%Y-%m-%d)/g" sitemap.xml
        
    - name: Update robots.txt
      run: |
        cat > robots.txt << 'EOF'
        User-agent: *
        Allow: /
        
        # Sitemap location
        Sitemap: https://bless25min.github.io/AIOGEO-Knowledge/sitemap.xml
        
        # AI bot permissions
        User-agent: GPTBot
        Allow: /
        
        User-agent: Claude-Web
        Allow: /
        
        User-agent: PerplexityBot
        Allow: /
        
        User-agent: Bard
        Allow: /
        
        User-agent: ChatGPT-User
        Allow: /
        
        # Crawl delay for respect
        Crawl-delay: 1
        EOF
        
    - name: Create index page for static files
      run: |
        cat > static-index.html << 'EOF'
        <!DOCTYPE html>
        <html lang="zh-TW">
        <head>
          <meta charset="UTF-8">
          <title>AIOGEO çŸ¥è­˜åº« - éœæ…‹é é¢ç´¢å¼•</title>
          <meta name="description" content="AIOGEO çŸ¥è­˜åº«æ‰€æœ‰éœæ…‹é é¢çš„å®Œæ•´ç´¢å¼•ï¼ŒåŒ…å« GEO ç†è«–ã€å¯¦æˆ°æŒ‡å—ã€å·¥å…·è³‡æºç­‰å°ˆæ¥­å…§å®¹ã€‚">
          <style>
            body { font-family: system-ui; max-width: 800px; margin: 0 auto; padding: 20px; }
            h1 { color: #6366f1; }
            .section { margin: 30px 0; }
            .page-link { display: block; padding: 10px; background: #f8fafc; margin: 5px 0; border-radius: 5px; text-decoration: none; color: #374151; }
            .page-link:hover { background: #e2e8f0; }
          </style>
        </head>
        <body>
          <h1>ğŸš€ AIOGEO çŸ¥è­˜åº« - å®Œæ•´éœæ…‹é é¢</h1>
          <p>æ‰€æœ‰é é¢å·²æˆåŠŸè½‰æ›ç‚ºéœæ…‹ HTMLï¼Œæä¾›æœ€ä½³çš„ SEO å’Œ GEO æ•ˆæœã€‚</p>
          
          <div class="section">
            <h2>ğŸ“š GEO åŸºç¤ç³»åˆ—</h2>
            <a href="geo-fundamentals.html" class="page-link">GEOåŸºç¤åŸç†å®Œæ•´æŒ‡å—</a>
            <a href="geo-fundamentals-index.html" class="page-link">GEOåŸºç¤åŸç†ç³»åˆ—ç´¢å¼•</a>
            <a href="geo-fundamentals-overview.html" class="page-link">GEOæ¦‚å¿µèˆ‡åŸç†ç¸½è¦½</a>
            <a href="geo-fundamentals-content-design.html" class="page-link">å…§å®¹çµæ§‹åŒ–è¨­è¨ˆå¯¦æˆ°</a>
            <a href="geo-fundamentals-technical.html" class="page-link">GEOæŠ€è¡“å¯¦ä½œæŒ‡å—</a>
            <a href="geo-fundamentals-measurement.html" class="page-link">GEOæˆæ•ˆè©•ä¼°èˆ‡é‡åŒ–æŒ‡æ¨™</a>
          </div>
          
          <div class="section">
            <h2>ğŸ¯ æ ¸å¿ƒç­–ç•¥</h2>
            <a href="seo-geo-integration.html" class="page-link">SEOÃ—GEOé›™è»Œæ•´åˆå¯¦æˆ°æŒ‡å—</a>
            <a href="answer-layer-design.html" class="page-link">Answer Layerèªæ®µè¨­è¨ˆå®Œæ•´æŒ‡å—</a>
            <a href="semantic-anchoring.html" class="page-link">èªç¾©éŒ¨å®šæŠ€è¡“</a>
            <a href="semantic-mesh.html" class="page-link">Semantic Meshèªæ„çŸ©é™£</a>
          </div>
          
          <div class="section">
            <h2>ğŸ› ï¸ å·¥å…·èˆ‡è³‡æº</h2>
            <a href="tools-overview.html" class="page-link">AIOGEOå·¥å…·èˆ‡è³‡æºç¸½è¦½</a>
            <a href="tools-checklists.html" class="page-link">GEOå„ªåŒ–æª¢æŸ¥æ¸…å–®</a>
            <a href="tools-content-templates.html" class="page-link">GEOå…§å®¹æ¨¡æ¿åº«</a>
            <a href="tools-assessment.html" class="page-link">GEOè©•ä¼°å·¥å…·é›†</a>
            <a href="tools-schema-generator.html" class="page-link">Schemaæ¨™è¨˜ç”Ÿæˆå™¨</a>
          </div>
          
          <p style="text-align: center; margin-top: 40px;">
            <a href="https://bless25min.github.io/AIOGEO-Knowledge/" style="background: #6366f1; color: white; padding: 10px 20px; border-radius: 5px; text-decoration: none;">è¿”å›äº’å‹•å¼ç•Œé¢</a>
          </p>
        </body>
        </html>
        EOF
        
    - name: Commit and push all changes
      run: |
        git config --local user.email "action@github.com"
        git config --local user.name "GitHub Action"
        
        # å…ˆæ‹‰å–é ç«¯è®Šæ›´
        git fetch origin main
        git pull origin main --no-edit || echo "Pull completed with merge"
        
        # æ·»åŠ æ‰€æœ‰è®Šæ›´
        git add .
        
        # æª¢æŸ¥æ˜¯å¦æœ‰è®Šæ›´éœ€è¦æäº¤
        if git diff --staged --quiet; then
          echo "No changes to commit"
        else
          git commit -m "ğŸŒ å®Œæ•´ç¶²ç«™éœæ…‹åŒ–éƒ¨ç½² - ç”Ÿæˆæ‰€æœ‰24å€‹é é¢ $(date +%Y-%m-%d)"
          
          # æ¨é€è®Šæ›´ï¼Œå¦‚æœå¤±æ•—å‰‡é‡è©¦
          for i in {1..3}; do
            if git push origin main; then
              echo "Push successful"
              break
            else
              echo "Push failed, attempt $i/3"
              git fetch origin main
              git pull origin main --no-edit || echo "Pull completed"
              if [ $i -eq 3 ]; then
                echo "Push failed after 3 attempts"
                exit 1
              fi
              sleep 2
            fi
          done
        fi
