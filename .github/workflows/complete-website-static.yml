name: 🌐 Complete Website Static Deployment - All Pages

on:
  push:
    branches: [ main ]
  workflow_dispatch:

permissions:
  contents: write
  pages: write
  id-token: write

jobs:
  generate-all-static-pages:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout repository
      uses: actions/checkout@v4
      with:
        token: ${{ secrets.GITHUB_TOKEN }}
        
    - name: Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '18'
        
    - name: Install dependencies
      run: |
        npm init -y
        npm install markdown-it cheerio fs-extra
        
    - name: Create static page generator script
      run: |
        cat > generate-static-pages.js << 'EOF'
        const fs = require('fs-extra');
        const path = require('path');
        const MarkdownIt = require('markdown-it');
        const md = new MarkdownIt({ html: true });

        // 讀取 Markdown 檔案並轉換為 HTML
        function readMarkdownFile(filePath) {
          try {
            const content = fs.readFileSync(filePath, 'utf8');
            // 移除 frontmatter 如果存在
            const cleanContent = content.replace(/^---[\s\S]*?---\n/, '');
            return md.render(cleanContent);
          } catch (error) {
            console.log(`Warning: Could not read ${filePath}`);
            return '<p>內容載入中...</p>';
          }
        }

        // 生成完整的 HTML 頁面
        function generateHTMLPage(title, description, content, canonical, type = 'article') {
          const schemaType = type === 'tool' ? 'TechArticle' : 'Article';
          
          return `<!DOCTYPE html>
        <html lang="zh-TW">
        <head>
          <meta charset="UTF-8">
          <title>${title} | AIOGEO 知識庫</title>
          <meta name="description" content="${description}">
          <meta name="viewport" content="width=device-width, initial-scale=1.0">
          <link rel="canonical" href="${canonical}">
          
          <!-- Open Graph Meta Tags -->
          <meta property="og:title" content="${title} | AIOGEO 知識庫">
          <meta property="og:description" content="${description}">
          <meta property="og:type" content="article">
          <meta property="og:url" content="${canonical}">
          <meta property="og:site_name" content="AIOGEO 知識庫">
          
          <!-- Schema.org 結構化標記 -->
          <script type="application/ld+json">
          {
            "@context": "https://schema.org",
            "@type": "${schemaType}",
            "headline": "${title}",
            "description": "${description}",
            "author": {
              "@type": "Person",
              "name": "廖天佑 Bless Liao"
            },
            "publisher": {
              "@type": "Organization",
              "name": "AIOGEO 知識庫"
            },
            "datePublished": "2025-07-07",
            "mainEntityOfPage": "${canonical}",
            "keywords": ["GEO", "生成式引擎優化", "AI搜尋", "內容優化"]
          }
          </script>
          
          <style>
            body {
              font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
              line-height: 1.7;
              max-width: 900px;
              margin: 0 auto;
              padding: 20px;
              color: #1f2937;
              background: #f8fafc;
            }
            .container {
              background: white;
              padding: 40px;
              border-radius: 12px;
              box-shadow: 0 4px 12px rgba(0,0,0,0.1);
              margin-bottom: 20px;
            }
            h1 { 
              color: #6366f1; 
              border-bottom: 3px solid #6366f1; 
              padding-bottom: 15px; 
              margin-bottom: 30px;
            }
            h2 { 
              color: #374151; 
              margin-top: 35px; 
              margin-bottom: 20px;
              border-left: 4px solid #6366f1;
              padding-left: 15px;
            }
            h3 { 
              color: #4b5563; 
              margin-top: 25px;
            }
            .summary {
              background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
              border: 2px solid #0ea5e9;
              border-radius: 12px;
              padding: 24px;
              margin: 25px 0;
              font-size: 1.05em;
              line-height: 1.6;
            }
            .summary::before {
              content: "📖 內容摘要";
              display: block;
              font-weight: bold;
              margin-bottom: 12px;
              color: #0369a1;
              font-size: 0.9em;
            }
            code {
              background: #f1f5f9;
              padding: 2px 6px;
              border-radius: 4px;
              font-family: 'Monaco', 'Consolas', monospace;
            }
            pre {
              background: #1e293b;
              color: #e2e8f0;
              padding: 20px;
              border-radius: 8px;
              overflow-x: auto;
            }
            pre code {
              background: none;
              padding: 0;
              color: inherit;
            }
            table {
              width: 100%;
              border-collapse: collapse;
              margin: 20px 0;
            }
            th, td {
              border: 1px solid #e5e7eb;
              padding: 12px;
              text-align: left;
            }
            th {
              background: #f9fafb;
              font-weight: 600;
              color: #374151;
            }
            blockquote {
              border-left: 4px solid #6366f1;
              padding-left: 20px;
              margin: 20px 0;
              background: #f8fafc;
              padding: 15px 20px;
              border-radius: 0 8px 8px 0;
            }
            ul, ol {
              padding-left: 25px;
            }
            li {
              margin: 8px 0;
            }
            .enhanced-link {
              background: #6366f1;
              color: white;
              padding: 12px 24px;
              border-radius: 8px;
              text-decoration: none;
              display: inline-block;
              margin: 10px 10px 10px 0;
              transition: background 0.3s;
            }
            .enhanced-link:hover { 
              background: #4f46e5; 
            }
            .toc {
              background: #f8fafc;
              border: 1px solid #e5e7eb;
              border-radius: 8px;
              padding: 20px;
              margin: 20px 0;
            }
            .toc h3 {
              margin-top: 0;
              color: #374151;
            }
            .nav-footer {
              background: #f8fafc;
              border-radius: 8px;
              padding: 25px;
              margin-top: 40px;
              text-align: center;
              border-top: 1px solid #e5e7eb;
            }
          </style>
        </head>
        <body>
          <div class="container">
            <main>
              ${content}
            </main>
            
            <footer class="nav-footer">
              <a href="https://bless25min.github.io/AIOGEO-Knowledge/#${canonical.split('.html')[0].replace('https://bless25min.github.io/AIOGEO-Knowledge', '')}" class="enhanced-link">
                💡 在互動式界面中探索更多功能
              </a>
              <a href="https://bless25min.github.io/AIOGEO-Knowledge/" class="enhanced-link">
                🏠 返回知識庫首頁
              </a>
              <p style="margin-top: 20px; color: #6b7280; font-size: 0.9em;">
                📚 AIOGEO 知識庫 | 🎯 讓AI看見你的內容 | 📅 ${new Date().toLocaleDateString('zh-TW')}
              </p>
            </footer>
          </div>
        </body>
        </html>`;
        }

        // 文章列表配置
        const articles = [
          // GEO 基礎系列
          {
            file: 'posts/geo-fundamentals.md',
            output: 'geo-fundamentals.html',
            title: 'GEO基礎原理完整指南：AI搜尋時代的內容優化策略',
            description: '深入解析 GEO (生成式引擎優化) 基礎原理，提供AI搜尋時代的內容優化策略與實戰技巧。涵蓋三層語義可見性架構、五大引用潛力指標和完整實施框架。'
          },
          {
            file: 'posts/geo-fundamentals-index.md',
            output: 'geo-fundamentals-index.html',
            title: 'GEO基礎原理系列索引',
            description: 'GEO基礎原理完整學習路徑，從概念理解到實戰應用的系統性指南。'
          },
          {
            file: 'posts/geo-fundamentals-overview.md',
            output: 'geo-fundamentals-overview.html',
            title: 'GEO概念與原理總覽',
            description: 'GEO生成式引擎優化的基本概念、發展背景和核心原理介紹。'
          },
          {
            file: 'posts/geo-fundamentals-content-design.md',
            output: 'geo-fundamentals-content-design.html',
            title: '內容結構化設計實戰：打造AI友善的Answer Layer',
            description: '深入講解如何設計AI友善的內容結構，包含Answer Layer語段設計原理、段落優化技巧和FAQ模組標準格式。'
          },
          {
            file: 'posts/geo-fundamentals-technical.md',
            output: 'geo-fundamentals-technical.html',
            title: 'GEO技術實作指南：Schema標記與HTML優化',
            description: '完整的GEO技術實作指南，涵蓋Schema.org結構化標記、HTML語義優化和技術SEO最佳實務。'
          },
          {
            file: 'posts/geo-fundamentals-measurement.md',
            output: 'geo-fundamentals-measurement.html',
            title: 'GEO成效評估與量化指標',
            description: 'GEO優化效果的評估方法，包含AI引用率監控、語義可見性指標和ROI計算方式。'
          },
          
          // 核心策略文章
          {
            file: 'posts/seo-geo-integration.md',
            output: 'seo-geo-integration.html',
            title: 'SEO×GEO雙軌整合實戰指南',
            description: 'SEO與GEO雙軌優化策略，整合傳統搜尋引擎優化與AI引用優化的完整實施框架。'
          },
          {
            file: 'posts/answer-layer-design.md',
            output: 'answer-layer-design.html',
            title: 'Answer Layer語段設計完整指南',
            description: '深入解析Answer Layer設計原理，提供AI友善的內容模組化策略和實作技巧。'
          },
          {
            file: 'posts/semantic-anchoring.md',
            output: 'semantic-anchoring.html',
            title: '語義錨定技術：提升AI內容識別精準度',
            description: '語義錨定技術的詳細解析，包含主題聚焦策略、語義清晰度優化和內容結構設計。'
          },
          {
            file: 'posts/semantic-mesh.md',
            output: 'semantic-mesh.html',
            title: 'Semantic Mesh語意矩陣：建立智慧內容網絡',
            description: 'Semantic Mesh架構設計完整指南，建立主幹頁、子主題頁、微型頁三層內容網絡。'
          },
          
          // 技術實作文章
          {
            file: 'posts/schema-implementation.md',
            output: 'schema-implementation.html',
            title: 'Schema.org結構化標記實作指南',
            description: '完整的Schema.org實作教學，涵蓋Article、FAQ、HowTo等多種標記類型和最佳實務。'
          },
          {
            file: 'posts/faq-design.md',
            output: 'faq-design.html',
            title: 'FAQ模組設計：提升AI引用友善度',
            description: 'FAQ模組的設計原理和實作方法，包含問答結構優化和Schema標記策略。'
          },
          {
            file: 'posts/citation-enhancement.md',
            output: 'citation-enhancement.html',
            title: '引用潛力提升策略：權威性與可信度建立',
            description: '提升內容引用潛力的策略方法，包含權威來源引用、可信度建立和專家觀點整合。'
          },
          
          // 多模態內容
          {
            file: 'posts/multimodal-optimization.md',
            output: 'multimodal-optimization.html',
            title: '多模態內容優化：圖文影音全方位策略',
            description: '多模態內容的優化策略，涵蓋圖像、影片、音頻等多種媒體形式的AI友善設計。'
          },
          {
            file: 'posts/multimodal-creation.md',
            output: 'multimodal-creation.html',
            title: '多模態內容創作實戰技巧',
            description: '多模態內容的創作方法和工具使用，提供圖表設計、影片製作和互動內容開發指南。'
          },
          
          // AI相關專業文章
          {
            file: 'posts/ai-search-algorithm.md',
            output: 'ai-search-algorithm.html',
            title: 'AI搜尋演算法深度解析',
            description: '深入分析各大AI搜尋平台的演算法機制，包含ChatGPT、Claude、Perplexity等平台特性。'
          },
          {
            file: 'posts/ai-citation-tracking.md',
            output: 'ai-citation-tracking.html',
            title: 'AI引用追蹤與監控系統建立',
            description: '建立AI引用追蹤系統的完整指南，包含監控工具選擇、指標設計和效果分析方法。'
          },
          
          // 測量與評估
          {
            file: 'posts/geo-measurement.md',
            output: 'geo-measurement.html',
            title: 'GEO成效測量與評估完整指南',
            description: 'GEO優化成效的量化評估方法，包含指標定義、數據收集和分析框架。'
          }
        ];

        // 工具頁面配置
        const tools = [
          {
            file: 'tools/README.md',
            output: 'tools-overview.html',
            title: 'AIOGEO工具與資源總覽',
            description: 'AIOGEO知識庫提供的完整工具集合，包含評估工具、檢查清單、模板和資源連結。',
            type: 'tool'
          },
          {
            file: 'tools/checklists.md',
            output: 'tools-checklists.html',
            title: 'GEO優化檢查清單',
            description: '完整的GEO優化檢查清單，提供逐項對照的優化要點和品質標準。',
            type: 'tool'
          },
          {
            file: 'tools/content-templates.md',
            output: 'tools-content-templates.html',
            title: 'GEO內容模板庫',
            description: '標準化的GEO內容創作模板，包含文章架構、FAQ格式和Schema標記範例。',
            type: 'tool'
          },
          {
            file: 'tools/assessment-tools.md',
            output: 'tools-assessment.html',
            title: 'GEO評估工具集',
            description: 'GEO成效評估工具集合，包含AI引用監控、語義分析和效果追蹤工具。',
            type: 'tool'
          },
          {
            file: 'tools/schema-generator.md',
            output: 'tools-schema-generator.html',
            title: 'Schema標記生成器',
            description: '自動化Schema.org標記生成工具，支援Article、FAQ、HowTo等多種標記類型。',
            type: 'tool'
          }
        ];

        // 生成所有文章頁面
        console.log('🚀 開始生成靜態頁面...');
        
        articles.forEach(article => {
          try {
            const content = readMarkdownFile(article.file);
            const canonical = `https://bless25min.github.io/AIOGEO-Knowledge/${article.output}`;
            const html = generateHTMLPage(article.title, article.description, content, canonical);
            fs.writeFileSync(article.output, html);
            console.log(`✅ 生成完成: ${article.output}`);
          } catch (error) {
            console.log(`❌ 生成失敗: ${article.output} - ${error.message}`);
          }
        });

        // 生成所有工具頁面
        tools.forEach(tool => {
          try {
            const content = readMarkdownFile(tool.file);
            const canonical = `https://bless25min.github.io/AIOGEO-Knowledge/${tool.output}`;
            const html = generateHTMLPage(tool.title, tool.description, content, canonical, tool.type);
            fs.writeFileSync(tool.output, html);
            console.log(`✅ 生成完成: ${tool.output}`);
          } catch (error) {
            console.log(`❌ 生成失敗: ${tool.output} - ${error.message}`);
          }
        });

        console.log('🎉 所有靜態頁面生成完成！');
        EOF
        
    - name: Generate all static pages
      run: |
        node generate-static-pages.js
        
    - name: Generate comprehensive sitemap
      run: |
        cat > sitemap.xml << 'EOF'
        <?xml version="1.0" encoding="UTF-8"?>
        <urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
            <!-- 主頁面 -->
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>weekly</changefreq>
                <priority>1.0</priority>
            </url>
            
            <!-- 核心頁面 -->
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/about.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>monthly</changefreq>
                <priority>0.9</priority>
            </url>
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/contributing.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>monthly</changefreq>
                <priority>0.8</priority>
            </url>
            
            <!-- GEO 基礎系列文章 -->
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/geo-fundamentals.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>weekly</changefreq>
                <priority>0.95</priority>
            </url>
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/geo-fundamentals-index.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>weekly</changefreq>
                <priority>0.9</priority>
            </url>
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/geo-fundamentals-overview.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>weekly</changefreq>
                <priority>0.9</priority>
            </url>
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/geo-fundamentals-content-design.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>weekly</changefreq>
                <priority>0.9</priority>
            </url>
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/geo-fundamentals-technical.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>weekly</changefreq>
                <priority>0.9</priority>
            </url>
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/geo-fundamentals-measurement.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>weekly</changefreq>
                <priority>0.9</priority>
            </url>
            
            <!-- 核心策略文章 -->
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/seo-geo-integration.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>weekly</changefreq>
                <priority>0.9</priority>
            </url>
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/answer-layer-design.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>weekly</changefreq>
                <priority>0.85</priority>
            </url>
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/semantic-anchoring.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>weekly</changefreq>
                <priority>0.85</priority>
            </url>
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/semantic-mesh.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>weekly</changefreq>
                <priority>0.85</priority>
            </url>
            
            <!-- 技術實作文章 -->
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/schema-implementation.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>weekly</changefreq>
                <priority>0.8</priority>
            </url>
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/faq-design.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>weekly</changefreq>
                <priority>0.8</priority>
            </url>
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/citation-enhancement.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>weekly</changefreq>
                <priority>0.8</priority>
            </url>
            
            <!-- 多模態內容優化 -->
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/multimodal-optimization.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>weekly</changefreq>
                <priority>0.8</priority>
            </url>
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/multimodal-creation.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>weekly</changefreq>
                <priority>0.8</priority>
            </url>
            
            <!-- AI 相關專業文章 -->
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/ai-search-algorithm.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>weekly</changefreq>
                <priority>0.8</priority>
            </url>
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/ai-citation-tracking.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>weekly</changefreq>
                <priority>0.75</priority>
            </url>
            
            <!-- 測量與評估 -->
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/geo-measurement.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>weekly</changefreq>
                <priority>0.75</priority>
            </url>
            
            <!-- 工具與資源頁面 -->
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/tools-overview.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>weekly</changefreq>
                <priority>0.8</priority>
            </url>
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/tools-checklists.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>weekly</changefreq>
                <priority>0.75</priority>
            </url>
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/tools-content-templates.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>weekly</changefreq>
                <priority>0.75</priority>
            </url>
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/tools-assessment.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>weekly</changefreq>
                <priority>0.75</priority>
            </url>
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/tools-schema-generator.html</loc>
                <lastmod>REPLACE_DATE</lastmod>
                <changefreq>weekly</changefreq>
                <priority>0.75</priority>
            </url>
        </urlset>
        EOF
        
        # 替換日期
        sed -i "s/REPLACE_DATE/$(date +%Y-%m-%d)/g" sitemap.xml
        
    - name: Update robots.txt
      run: |
        cat > robots.txt << 'EOF'
        User-agent: *
        Allow: /
        
        # Sitemap location
        Sitemap: https://bless25min.github.io/AIOGEO-Knowledge/sitemap.xml
        
        # AI bot permissions
        User-agent: GPTBot
        Allow: /
        
        User-agent: Claude-Web
        Allow: /
        
        User-agent: PerplexityBot
        Allow: /
        
        User-agent: Bard
        Allow: /
        
        User-agent: ChatGPT-User
        Allow: /
        
        # Crawl delay for respect
        Crawl-delay: 1
        EOF
        
    - name: Create index page for static files
      run: |
        cat > static-index.html << 'EOF'
        <!DOCTYPE html>
        <html lang="zh-TW">
        <head>
          <meta charset="UTF-8">
          <title>AIOGEO 知識庫 - 靜態頁面索引</title>
          <meta name="description" content="AIOGEO 知識庫所有靜態頁面的完整索引，包含 GEO 理論、實戰指南、工具資源等專業內容。">
          <style>
            body { font-family: system-ui; max-width: 800px; margin: 0 auto; padding: 20px; }
            h1 { color: #6366f1; }
            .section { margin: 30px 0; }
            .page-link { display: block; padding: 10px; background: #f8fafc; margin: 5px 0; border-radius: 5px; text-decoration: none; color: #374151; }
            .page-link:hover { background: #e2e8f0; }
          </style>
        </head>
        <body>
          <h1>🚀 AIOGEO 知識庫 - 完整靜態頁面</h1>
          <p>所有頁面已成功轉換為靜態 HTML，提供最佳的 SEO 和 GEO 效果。</p>
          
          <div class="section">
            <h2>📚 GEO 基礎系列</h2>
            <a href="geo-fundamentals.html" class="page-link">GEO基礎原理完整指南</a>
            <a href="geo-fundamentals-index.html" class="page-link">GEO基礎原理系列索引</a>
            <a href="geo-fundamentals-overview.html" class="page-link">GEO概念與原理總覽</a>
            <a href="geo-fundamentals-content-design.html" class="page-link">內容結構化設計實戰</a>
            <a href="geo-fundamentals-technical.html" class="page-link">GEO技術實作指南</a>
            <a href="geo-fundamentals-measurement.html" class="page-link">GEO成效評估與量化指標</a>
          </div>
          
          <div class="section">
            <h2>🎯 核心策略</h2>
            <a href="seo-geo-integration.html" class="page-link">SEO×GEO雙軌整合實戰指南</a>
            <a href="answer-layer-design.html" class="page-link">Answer Layer語段設計完整指南</a>
            <a href="semantic-anchoring.html" class="page-link">語義錨定技術</a>
            <a href="semantic-mesh.html" class="page-link">Semantic Mesh語意矩陣</a>
          </div>
          
          <div class="section">
            <h2>🛠️ 工具與資源</h2>
            <a href="tools-overview.html" class="page-link">AIOGEO工具與資源總覽</a>
            <a href="tools-checklists.html" class="page-link">GEO優化檢查清單</a>
            <a href="tools-content-templates.html" class="page-link">GEO內容模板庫</a>
            <a href="tools-assessment.html" class="page-link">GEO評估工具集</a>
            <a href="tools-schema-generator.html" class="page-link">Schema標記生成器</a>
          </div>
          
          <p style="text-align: center; margin-top: 40px;">
            <a href="https://bless25min.github.io/AIOGEO-Knowledge/" style="background: #6366f1; color: white; padding: 10px 20px; border-radius: 5px; text-decoration: none;">返回互動式界面</a>
          </p>
        </body>
        </html>
        EOF
        
    - name: Commit and push all changes
      run: |
        git config --local user.email "action@github.com"
        git config --local user.name "GitHub Action"
        
        # 先拉取遠端變更
        git fetch origin main
        git pull origin main --no-edit || echo "Pull completed with merge"
        
        # 添加所有變更
        git add .
        
        # 檢查是否有變更需要提交
        if git diff --staged --quiet; then
          echo "No changes to commit"
        else
          git commit -m "🌐 完整網站靜態化部署 - 生成所有24個頁面 $(date +%Y-%m-%d)"
          
          # 推送變更，如果失敗則重試
          for i in {1..3}; do
            if git push origin main; then
              echo "Push successful"
              break
            else
              echo "Push failed, attempt $i/3"
              git fetch origin main
              git pull origin main --no-edit || echo "Pull completed"
              if [ $i -eq 3 ]; then
                echo "Push failed after 3 attempts"
                exit 1
              fi
              sleep 2
            fi
          done
        fi
