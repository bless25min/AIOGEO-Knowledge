name: ğŸ”„ Fix All Links - Convert to Static HTML

on:
  workflow_dispatch:
    inputs:
      force_update:
        description: 'å¼·åˆ¶æ›´æ–°æ‰€æœ‰é é¢'
        required: false
        default: 'true'
        type: boolean

permissions:
  contents: write
  pages: write
  id-token: write

jobs:
  fix-all-links:
    runs-on: ubuntu-latest
    
    steps:
    - name: ğŸ”„ Checkout repository
      uses: actions/checkout@v4
      with:
        fetch-depth: 0
        token: ${{ secrets.GITHUB_TOKEN }}

    - name: ğŸ› ï¸ Configure Git
      run: |
        git config --local user.email "action@github.com"
        git config --local user.name "AIOGEO Link Fixer"
        git config pull.rebase false

    - name: ğŸ” Scan and fix all HTML files
      run: |
        echo "ğŸ” æƒæä¸¦ä¿®æ­£æ‰€æœ‰ HTML æª”æ¡ˆä¸­çš„é€£çµ..."
        
        # å‡½æ•¸ï¼šä¿®æ­£å–®å€‹æª”æ¡ˆä¸­çš„é€£çµ
        fix_links_in_file() {
          local file="$1"
          echo "  ğŸ“ ä¿®æ­£ $file..."
          
          # å‚™ä»½åŸæª”æ¡ˆ
          cp "$file" "$file.backup"
          
          # ä¿®æ­£å„ç¨® hash é€£çµç‚ºéœæ…‹ HTML é€£çµ
          sed -i 's|href="#/"|href="/"|g' "$file"
          sed -i 's|href="#/about"|href="about.html"|g' "$file"
          sed -i 's|href="#/contributing"|href="contributing.html"|g' "$file"
          sed -i 's|href="#/privacy"|href="privacy.html"|g' "$file"
          
          # ä¿®æ­£æ–‡ç« é€£çµ
          sed -i 's|href="#/posts/geo-fundamentals"|href="geo-fundamentals.html"|g' "$file"
          sed -i 's|href="#/posts/seo-geo-integration"|href="seo-geo-integration.html"|g' "$file"
          sed -i 's|href="#/posts/semantic-mesh"|href="semantic-mesh.html"|g' "$file"
          sed -i 's|href="#/posts/ai-citation-tracking"|href="ai-citation-tracking.html"|g' "$file"
          sed -i 's|href="#/posts/multimodal-optimization"|href="multimodal-optimization.html"|g' "$file"
          sed -i 's|href="#/posts/schema-implementation"|href="schema-implementation.html"|g' "$file"
          sed -i 's|href="#/posts/answer-layer-design"|href="answer-layer-design.html"|g' "$file"
          sed -i 's|href="#/posts/semantic-anchoring"|href="semantic-anchoring.html"|g' "$file"
          sed -i 's|href="#/posts/citation-enhancement"|href="citation-enhancement.html"|g' "$file"
          sed -i 's|href="#/posts/faq-design"|href="faq-design.html"|g' "$file"
          sed -i 's|href="#/posts/geo-measurement"|href="geo-measurement.html"|g' "$file"
          sed -i 's|href="#/posts/multimodal-creation"|href="multimodal-creation.html"|g' "$file"
          sed -i 's|href="#/posts/ai-search-algorithm"|href="ai-search-algorithm.html"|g' "$file"
          sed -i 's|href="#/posts/geo-fundamentals-index"|href="geo-fundamentals-index.html"|g' "$file"
          sed -i 's|href="#/posts/geo-fundamentals-overview"|href="geo-fundamentals-overview.html"|g' "$file"
          sed -i 's|href="#/posts/geo-fundamentals-content-design"|href="geo-fundamentals-content-design.html"|g' "$file"
          sed -i 's|href="#/posts/geo-fundamentals-technical"|href="geo-fundamentals-technical.html"|g' "$file"
          sed -i 's|href="#/posts/geo-fundamentals-measurement"|href="geo-fundamentals-measurement.html"|g' "$file"
          
          # ä¿®æ­£å·¥å…·é€£çµ
          sed -i 's|href="#/tools/checklists"|href="tools-checklists.html"|g' "$file"
          sed -i 's|href="#/tools/content-templates"|href="tools-content-templates.html"|g' "$file"
          sed -i 's|href="#/tools/schema-generator"|href="tools-schema-generator.html"|g' "$file"
          sed -i 's|href="#/tools/assessment-tools"|href="tools-assessment-tools.html"|g' "$file"
          sed -i 's|href="#/tools/README"|href="tools-README.html"|g' "$file"
          
          # é€šç”¨æ¨¡å¼ä¿®æ­£
          sed -i 's|href="#/posts/\([^"]*\)"|href="\1.html"|g' "$file"
          sed -i 's|href="#/tools/\([^"]*\)"|href="tools-\1.html"|g' "$file"
          
          echo "  âœ… $file ä¿®æ­£å®Œæˆ"
        }
        
        # ä¿®æ­£æ‰€æœ‰ HTML æª”æ¡ˆ
        for file in *.html; do
          if [ -f "$file" ]; then
            fix_links_in_file "$file"
          fi
        done
        
        # ç‰¹åˆ¥è™•ç†å¯èƒ½å­˜åœ¨çš„å…¶ä»– HTML æª”æ¡ˆ
        find . -name "*.html" -not -path "./.git/*" -not -name "*.backup" | while read file; do
          if [ "$file" != "./index.html" ]; then
            fix_links_in_file "$file"
          fi
        done

    - name: ğŸ“ Fix markdown files links  
      run: |
        echo "ğŸ“ ä¿®æ­£ Markdown æª”æ¡ˆä¸­çš„é€£çµ..."
        
        # å‡½æ•¸ï¼šä¿®æ­£ Markdown æª”æ¡ˆä¸­çš„é€£çµ
        fix_md_links() {
          local file="$1"
          echo "  ğŸ“„ ä¿®æ­£ $file..."
          
          # å‚™ä»½åŸæª”æ¡ˆ
          cp "$file" "$file.backup"
          
          # ä¿®æ­£ Markdown é€£çµèªæ³•
          sed -i 's|\[è¿”å›é¦–é \](#/)|\[è¿”å›é¦–é \](/)|g' "$file"
          sed -i 's|\[é—œæ–¼ä½œè€…\](#/about)|\[é—œæ–¼ä½œè€…\](about.html)|g' "$file"
          sed -i 's|\[åƒèˆ‡è²¢ç»\](#/contributing)|\[åƒèˆ‡è²¢ç»\](contributing.html)|g' "$file"
          sed -i 's|\[éš±ç§æ”¿ç­–\](#/privacy)|\[éš±ç§æ”¿ç­–\](privacy.html)|g' "$file"
          
          # ä¿®æ­£æ–‡ç« é–“çš„ç›¸äº’é€£çµ
          sed -i 's|(\#/posts/\([^)]*\))|(../\1.html)|g' "$file"
          sed -i 's|(\#/tools/\([^)]*\))|(../tools-\1.html)|g' "$file"
          
          # ä¿®æ­£æ ¹ç›®éŒ„çš„é€£çµ
          sed -i 's|(\#/posts/\([^)]*\))|(\1.html)|g' "$file"
          sed -i 's|(\#/tools/\([^)]*\))|(tools-\1.html)|g' "$file"
          
          echo "  âœ… $file ä¿®æ­£å®Œæˆ"
        }
        
        # ä¿®æ­£æ ¹ç›®éŒ„çš„ Markdown æª”æ¡ˆ
        for file in *.md; do
          if [ -f "$file" ]; then
            fix_md_links "$file"
          fi
        done
        
        # ä¿®æ­£ posts ç›®éŒ„ä¸‹çš„æª”æ¡ˆ
        if [ -d "posts" ]; then
          for file in posts/*.md; do
            if [ -f "$file" ]; then
              fix_md_links "$file"
            fi
          done
        fi
        
        # ä¿®æ­£ tools ç›®éŒ„ä¸‹çš„æª”æ¡ˆ
        if [ -d "tools" ]; then
          for file in tools/*.md; do
            if [ -f "$file" ]; then
              fix_md_links "$file"
            fi
          done
        fi

    - name: ğŸ—ºï¸ Update navigation sidebar
      run: |
        echo "ğŸ—ºï¸ æ›´æ–°å°èˆªå´é‚Šæ¬„..."
        
        cat > _sidebar.md << 'EOF'
        <!-- AIOGEO çŸ¥è­˜åº«å°èˆªçµæ§‹ -->
        
        ## ğŸ  [é¦–é ](/)
        
        ## ğŸ‘¤ é—œæ–¼å°ˆæ¡ˆ
        - [é—œæ–¼ä½œè€…](about.html)
        - [åƒèˆ‡è²¢ç»](contributing.html)
        - [éš±ç§æ”¿ç­–](privacy.html)
        
        ## ğŸ“š ç†è«–åŸºç¤
        - [GEO åŸºç¤åŸç†](geo-fundamentals.html)
        - [GEO åŸºç¤ç´¢å¼•](geo-fundamentals-index.html)
        - [GEO ç¸½è¦½](geo-fundamentals-overview.html)
        - [GEO å…§å®¹è¨­è¨ˆ](geo-fundamentals-content-design.html)
        - [GEO æŠ€è¡“å¯¦ä½œ](geo-fundamentals-technical.html)
        - [GEO æ¸¬é‡](geo-fundamentals-measurement.html)
        
        ## ğŸ¯ å„ªåŒ–ç­–ç•¥
        - [SEO Ã— GEO æ•´åˆ](seo-geo-integration.html)
        - [ç­”æ¡ˆå±¤è¨­è¨ˆ](answer-layer-design.html)
        - [èªæ„éŒ¨å®šæŠ€è¡“](semantic-anchoring.html)
        - [èªæ„ç¶²æ ¼æ¶æ§‹](semantic-mesh.html)
        - [å¼•ç”¨å¢å¼·ç­–ç•¥](citation-enhancement.html)
        - [FAQ è¨­è¨ˆåŸå‰‡](faq-design.html)
        
        ## ğŸ”¬ å‰æ²¿æŠ€è¡“
        - [AI æœå°‹æ¼”ç®—æ³•](ai-search-algorithm.html)
        - [AI å¼•ç”¨è¿½è¹¤](ai-citation-tracking.html)
        - [å¤šæ¨¡æ…‹å…§å®¹å„ªåŒ–](multimodal-optimization.html)
        - [å¤šæ¨¡æ…‹å‰µä½œæŒ‡å—](multimodal-creation.html)
        - [Schema å¯¦ä½œæŒ‡å—](schema-implementation.html)
        - [GEO æ¸¬é‡æ–¹æ³•](geo-measurement.html)
        
        ## ğŸ› ï¸ å¯¦ç”¨å·¥å…·
        - [å·¥å…·ç¸½è¦½](tools-README.html)
        - [è©•ä¼°å·¥å…·](tools-assessment-tools.html)
        - [æª¢æŸ¥æ¸…å–®](tools-checklists.html)
        - [å…§å®¹æ¨¡æ¿](tools-content-templates.html)
        - [Schema ç”Ÿæˆå™¨](tools-schema-generator.html)
        
        ---
        
        ### ğŸ”— å¤–éƒ¨é€£çµ
        - [GitHub Repository](https://github.com/bless25min/AIOGEO-Knowledge)
        - [å•é¡Œå›å ±](https://github.com/bless25min/AIOGEO-Knowledge/issues)
        - [è¨è«–å€](https://github.com/bless25min/AIOGEO-Knowledge/discussions)
        
        ---
        
        <div style="text-align: center; margin-top: 20px; padding: 15px; background: #f8fafc; border-radius: 8px;">
          <small style="color: #6b7280;">
            ğŸ“š <strong>AIOGEO çŸ¥è­˜åº«</strong><br>
            è®“ AI çœ‹è¦‹ä½ çš„å…§å®¹<br>
            ä½œè€…ï¼š<a href="about.html">å»–å¤©ä½‘ Bless</a>
          </small>
        </div>
        EOF

    - name: ğŸ”„ Create missing static pages
      run: |
        echo "ğŸ”„ å»ºç«‹ç¼ºå°‘çš„éœæ…‹é é¢..."
        
        # å‡½æ•¸ï¼šå»ºç«‹éœæ…‹é é¢
        create_static_page() {
          local filename="$1"
          local title="$2"
          local description="$3"
          local category="$4"
          
          cat > "$filename" << EOF
        <!DOCTYPE html>
        <html lang="zh-TW">
        <head>
          <meta charset="UTF-8">
          <meta name="viewport" content="width=device-width, initial-scale=1.0">
          <title>$title | AIOGEO çŸ¥è­˜åº«</title>
          <meta name="description" content="$description">
          <meta name="keywords" content="GEO, ç”Ÿæˆå¼å¼•æ“å„ªåŒ–, AIæœå°‹, $title, å»–å¤©ä½‘, Bless Liao">
          <meta name="author" content="å»–å¤©ä½‘ Bless Liao">
          
          <!-- Open Graph -->
          <meta property="og:title" content="$title | AIOGEO çŸ¥è­˜åº«">
          <meta property="og:description" content="$description">
          <meta property="og:type" content="article">
          <meta property="og:url" content="https://bless25min.github.io/AIOGEO-Knowledge/$filename">
          <meta property="og:site_name" content="AIOGEO çŸ¥è­˜åº«">
          
          <!-- Schema.org JSON-LD -->
          <script type="application/ld+json">
          {
            "@context": "https://schema.org",
            "@type": "Article",
            "headline": "$title",
            "description": "$description",
            "author": {
              "@type": "Person",
              "name": "å»–å¤©ä½‘ Bless Liao",
              "url": "https://github.com/bless25min"
            },
            "publisher": {
              "@type": "Organization",
              "name": "AIOGEO çŸ¥è­˜åº«",
              "url": "https://bless25min.github.io/AIOGEO-Knowledge/"
            },
            "datePublished": "2025-07-08",
            "dateModified": "2025-07-08",
            "mainEntityOfPage": "https://bless25min.github.io/AIOGEO-Knowledge/$filename",
            "keywords": ["GEO", "ç”Ÿæˆå¼å¼•æ“å„ªåŒ–", "AIæœå°‹", "$title"],
            "articleSection": "$category",
            "inLanguage": "zh-TW"
          }
          </script>
          
          <style>
            * {
              margin: 0;
              padding: 0;
              box-sizing: border-box;
            }
            
            body {
              font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans TC', sans-serif;
              line-height: 1.8;
              color: #1f2937;
              background: #f9fafb;
            }
            
            .container {
              max-width: 900px;
              margin: 0 auto;
              background: white;
              min-height: 100vh;
              box-shadow: 0 0 30px rgba(0,0,0,0.1);
            }
            
            header {
              background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
              color: white;
              padding: 40px;
              text-align: center;
            }
            
            .breadcrumb {
              font-size: 0.9em;
              opacity: 0.9;
              margin-bottom: 15px;
            }
            
            .breadcrumb a {
              color: white;
              text-decoration: none;
            }
            
            h1 {
              font-size: 2.5em;
              font-weight: 800;
              margin-bottom: 15px;
              text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
            }
            
            .article-meta {
              font-size: 1em;
              opacity: 0.9;
            }
            
            nav {
              background: #1f2937;
              padding: 15px 40px;
            }
            
            .nav-links {
              display: flex;
              justify-content: center;
              gap: 25px;
              flex-wrap: wrap;
            }
            
            .nav-link {
              color: #d1d5db;
              text-decoration: none;
              padding: 8px 16px;
              border-radius: 6px;
              transition: all 0.3s ease;
            }
            
            .nav-link:hover {
              background: #374151;
              color: white;
            }
            
            main {
              padding: 50px 40px;
              text-align: center;
            }
            
            .coming-soon {
              background: #f0f9ff;
              border: 2px solid #0ea5e9;
              border-radius: 15px;
              padding: 60px 40px;
              margin: 40px 0;
            }
            
            .coming-soon h2 {
              color: #0c4a6e;
              font-size: 2em;
              margin-bottom: 20px;
            }
            
            .coming-soon p {
              color: #075985;
              font-size: 1.2em;
              margin-bottom: 30px;
            }
            
            .back-link {
              display: inline-block;
              background: #6366f1;
              color: white;
              padding: 12px 24px;
              border-radius: 8px;
              text-decoration: none;
              font-weight: 500;
              transition: all 0.3s ease;
            }
            
            .back-link:hover {
              background: #4f46e5;
              transform: translateY(-2px);
            }
            
            footer {
              background: #1f2937;
              color: #d1d5db;
              padding: 40px;
              text-align: center;
            }
            
            @media (max-width: 768px) {
              header, main, footer {
                padding: 30px 20px;
              }
              
              nav {
                padding: 15px 20px;
              }
              
              h1 {
                font-size: 2em;
              }
              
              .coming-soon {
                padding: 40px 20px;
              }
            }
          </style>
        </head>
        <body>
          <div class="container">
            <header>
              <div class="breadcrumb">
                <a href="index.html">ğŸ  AIOGEO çŸ¥è­˜åº«</a> > $category
              </div>
              <h1>$title</h1>
              <div class="article-meta">
                ğŸ“… æœ€å¾Œæ›´æ–°ï¼š2025å¹´7æœˆ8æ—¥ | ğŸ‘¤ ä½œè€…ï¼šå»–å¤©ä½‘ Bless Liao
              </div>
            </header>
            
            <nav>
              <div class="nav-links">
                <a href="index.html" class="nav-link">ğŸ  é¦–é </a>
                <a href="geo-fundamentals.html" class="nav-link">ğŸ“š GEO åŸºç¤</a>
                <a href="tools-checklists.html" class="nav-link">ğŸ› ï¸ å·¥å…·</a>
                <a href="about.html" class="nav-link">ğŸ‘¤ é—œæ–¼</a>
                <a href="contributing.html" class="nav-link">ğŸ¤ è²¢ç»</a>
              </div>
            </nav>
            
            <main>
              <div class="coming-soon">
                <h2>ğŸš§ å…§å®¹å»ºè¨­ä¸­</h2>
                <p>
                  ã€Š$titleã€‹æ­£åœ¨ç²¾å¿ƒæ’°å¯«ä¸­ï¼Œæˆ‘å€‘è‡´åŠ›æ–¼æä¾›æœ€é«˜å“è³ªçš„ GEO å°ˆæ¥­å…§å®¹ã€‚
                  æ•¬è«‹æœŸå¾…é€™ç¯‡æ·±åº¦è§£ææ–‡ç« çš„ç™¼å¸ƒï¼
                </p>
                <a href="index.html" class="back-link">ğŸ  è¿”å›é¦–é </a>
              </div>
            </main>
            
            <footer>
              <p>&copy; 2025 AIOGEO çŸ¥è­˜åº« | è®“ AI çœ‹è¦‹ä½ çš„å…§å®¹</p>
            </footer>
          </div>
        </body>
        </html>
        EOF
        }
        
        # å»ºç«‹æ‰€æœ‰ç¼ºå°‘çš„é é¢
        echo "ğŸ“„ å»ºç«‹æ–‡ç« é é¢..."
        create_static_page "seo-geo-integration.html" "SEO Ã— GEO é›™è»Œæ•´åˆ" "å­¸ç¿’å¦‚ä½•åœ¨ä¿æŒå‚³çµ± SEO æ•ˆæœçš„åŒæ™‚ï¼Œå°å…¥ GEO ç­–ç•¥ï¼Œå¯¦ç¾é›™è»Œå„ªåŒ–çš„æœ€å¤§åŒ–æ•ˆç›Š" "æ•´åˆç­–ç•¥"
        create_static_page "semantic-mesh.html" "èªæ„ç¶²æ ¼æ¶æ§‹è¨­è¨ˆ" "æ·±åº¦è§£æ Semantic Mesh å…§å®¹ç¶²æ ¼ç³»çµ±ï¼Œå»ºç«‹ä¸»å¹¹é ã€å­ä¸»é¡Œé ã€å¾®å‹é çš„ä¸‰å±¤å…§å®¹æ¶æ§‹" "æ¶æ§‹è¨­è¨ˆ"
        create_static_page "ai-citation-tracking.html" "AI å¼•ç”¨è¿½è¹¤æ–¹æ³•" "å»ºç«‹å®Œæ•´çš„ AI å¼•ç”¨ç›£æ§é«”ç³»ï¼Œè¿½è¹¤å…§å®¹åœ¨å„å¤§ AI å¹³å°çš„è¡¨ç¾å’Œå¼•ç”¨æƒ…æ³" "æ•ˆæœç›£æ§"
        create_static_page "multimodal-optimization.html" "å¤šæ¨¡æ…‹å…§å®¹å„ªåŒ–" "æŒæ¡åœ–æ–‡ã€å½±éŸ³ã€äº’å‹•å…§å®¹çš„ GEO å„ªåŒ–æŠ€å·§ï¼Œæå‡å¤šåª’é«”å…§å®¹çš„ AI ç†è§£åº¦" "å¤šåª’é«”ç­–ç•¥"
        create_static_page "schema-implementation.html" "Schema å¯¦ä½œæŒ‡å—" "å®Œæ•´çš„çµæ§‹åŒ–è³‡æ–™å¯¦ä½œæ•™å­¸ï¼ŒåŒ…å« JSON-LD èªæ³•ã€å¸¸ç”¨ Schema é¡å‹å’Œæœ€ä½³å¯¦å‹™" "æŠ€è¡“å¯¦ä½œ"
        create_static_page "answer-layer-design.html" "ç­”æ¡ˆå±¤è¨­è¨ˆæŒ‡å—" "å­¸ç¿’å¦‚ä½•è¨­è¨ˆæœ‰æ•ˆçš„ Answer Layerï¼Œè®“ AI æ›´å®¹æ˜“ç†è§£å’Œå¼•ç”¨æ‚¨çš„æ ¸å¿ƒå…§å®¹" "å…§å®¹è¨­è¨ˆ"
        create_static_page "semantic-anchoring.html" "èªæ„éŒ¨å®šæŠ€è¡“" "æŒæ¡èªæ„éŒ¨å®šçš„æ ¸å¿ƒæŠ€å·§ï¼Œç¢ºä¿å…§å®¹ä¸»é¡Œæ˜ç¢ºã€çµæ§‹æ¸…æ™°ï¼Œä¾¿æ–¼ AI æº–ç¢ºåˆ†é¡" "æŠ€è¡“åŸç†"
        create_static_page "citation-enhancement.html" "å¼•ç”¨å¢å¼·ç­–ç•¥" "æå‡å…§å®¹è¢« AI å¼•ç”¨æ©Ÿç‡çš„é€²éšç­–ç•¥ï¼ŒåŒ…å«æ¬Šå¨æ€§å»ºç«‹å’Œå¯ä¿¡åº¦å„ªåŒ–" "å„ªåŒ–ç­–ç•¥"
        create_static_page "faq-design.html" "FAQ è¨­è¨ˆåŸå‰‡" "è¨­è¨ˆ AI å‹å–„çš„å¸¸è¦‹å•é¡Œè§£ç­”æ¨¡çµ„ï¼Œæä¾›çµæ§‹åŒ–çš„å•ç­”å…§å®¹ä¾› AI ç›´æ¥å¼•ç”¨" "å…§å®¹è¨­è¨ˆ"
        create_static_page "geo-measurement.html" "GEO æ¸¬é‡æ–¹æ³•" "å»ºç«‹å®Œæ•´çš„ GEO æ•ˆæœè©•ä¼°é«”ç³»ï¼Œè¿½è¹¤ AI å¼•ç”¨ç‡å’Œå…§å®¹è¡¨ç¾æŒ‡æ¨™" "æ•ˆæœè©•ä¼°"
        create_static_page "multimodal-creation.html" "å¤šæ¨¡æ…‹å‰µä½œæŒ‡å—" "å­¸ç¿’å‰µä½œè·¨åª’é«” GEO å…§å®¹ï¼ŒåŒ…å«åœ–æ–‡ã€å½±éŸ³ã€äº’å‹•å…ƒç´ çš„æ•´åˆå„ªåŒ–" "å‰µä½œæŒ‡å—"
        create_static_page "ai-search-algorithm.html" "AI æœå°‹æ¼”ç®—æ³•è§£æ" "æ·±å…¥è§£æä¸»æµ AI æœå°‹å¼•æ“çš„é‹ä½œæ©Ÿåˆ¶ï¼Œç†è§£å…§å®¹å¬å›å’Œæ’åºé‚è¼¯" "æŠ€è¡“åŸç†"
        
        # GEO åŸºç¤ç³»åˆ—
        create_static_page "geo-fundamentals-index.html" "GEO åŸºç¤ç´¢å¼•" "GEO åŸºç¤ç†è«–é«”ç³»çš„å®Œæ•´ç´¢å¼•ï¼Œç³»çµ±æ€§å­¸ç¿’ç”Ÿæˆå¼å¼•æ“å„ªåŒ–çš„æ ¸å¿ƒæ¦‚å¿µ" "åŸºç¤ç†è«–"
        create_static_page "geo-fundamentals-overview.html" "GEO åŸºç¤ç¸½è¦½" "GEO ç†è«–åŸºç¤çš„ç¸½é«”æ¦‚è¦½ï¼Œäº†è§£ç”Ÿæˆå¼å¼•æ“å„ªåŒ–çš„å…¨è²Œå’Œç™¼å±•è¶¨å‹¢" "åŸºç¤ç†è«–"
        create_static_page "geo-fundamentals-content-design.html" "GEO å…§å®¹è¨­è¨ˆåŸç†" "åŸºæ–¼ GEO ç†è«–çš„å…§å®¹è¨­è¨ˆåŸå‰‡ï¼Œå‰µä½œ AI å‹å–„çš„é«˜å“è³ªå…§å®¹" "å…§å®¹è¨­è¨ˆ"
        create_static_page "geo-fundamentals-technical.html" "GEO æŠ€è¡“å¯¦ä½œåŸºç¤" "GEO çš„æŠ€è¡“å¯¦ä½œåŸºç¤ï¼ŒåŒ…å«çµæ§‹åŒ–è³‡æ–™ã€èªæ„æ¨™è¨˜ç­‰æŠ€è¡“è¦é»" "æŠ€è¡“åŸºç¤"
        create_static_page "geo-fundamentals-measurement.html" "GEO æ¸¬é‡åŸºç¤" "GEO æ•ˆæœæ¸¬é‡çš„åŸºç¤æ–¹æ³•ï¼Œå»ºç«‹ç§‘å­¸çš„è©•ä¼°å’Œå„ªåŒ–é«”ç³»" "æ¸¬é‡è©•ä¼°"
        
        echo "ğŸ› ï¸ å»ºç«‹å·¥å…·é é¢..."
        create_static_page "tools-README.html" "å·¥å…·ç¸½è¦½" "AIOGEO çŸ¥è­˜åº«æä¾›çš„æ‰€æœ‰å¯¦ç”¨å·¥å…·å’Œè³‡æºç¸½è¦½ï¼Œæå‡ GEO å„ªåŒ–æ•ˆç‡" "å¯¦ç”¨å·¥å…·"
        create_static_page "tools-checklists.html" "GEO æª¢æŸ¥æ¸…å–®" "å®Œæ•´çš„å…§å®¹å„ªåŒ–æª¢æŸ¥æ¸…å–®ï¼Œç¢ºä¿æ¯ç¯‡å…§å®¹éƒ½ç¬¦åˆ GEO æ¨™æº–" "å¯¦ç”¨å·¥å…·"
        create_static_page "tools-content-templates.html" "å…§å®¹æ¨¡æ¿" "ç¶“éé©—è­‰çš„å…§å®¹çµæ§‹æ¨¡æ¿ï¼Œå¿«é€Ÿå‰µå»º AI å‹å–„çš„é«˜å“è³ªå…§å®¹" "å¯¦ç”¨å·¥å…·"
        create_static_page "tools-schema-generator.html" "Schema ç”Ÿæˆå™¨" "è‡ªå‹•åŒ–å·¥å…·å¹«æ‚¨ç”Ÿæˆæ­£ç¢ºçš„çµæ§‹åŒ–è³‡æ–™æ¨™è¨˜ï¼Œæå‡å…§å®¹æŠ€è¡“æ¨™æº–" "å¯¦ç”¨å·¥å…·"
        create_static_page "tools-assessment-tools.html" "è©•ä¼°å·¥å…·" "GEO æ•ˆæœè©•ä¼°å·¥å…·é›†ï¼Œç›£æ§å’Œåˆ†æå…§å®¹çš„ AI å¼•ç”¨è¡¨ç¾" "å¯¦ç”¨å·¥å…·"

    - name: ğŸ—ºï¸ Generate complete sitemap
      run: |
        echo "ğŸ—ºï¸ ç”Ÿæˆå®Œæ•´çš„ sitemap.xml..."
        
        cat > sitemap.xml << 'EOF'
        <?xml version="1.0" encoding="UTF-8"?>
        <urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
            <!-- ä¸»é é¢ -->
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/</loc>
                <lastmod>2025-07-08</lastmod>
                <changefreq>weekly</changefreq>
                <priority>1.0</priority>
            </url>
            
            <!-- æ ¸å¿ƒé é¢ -->
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/about.html</loc>
                <lastmod>2025-07-08</lastmod>
                <changefreq>monthly</changefreq>
                <priority>0.8</priority>
            </url>
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/contributing.html</loc>
                <lastmod>2025-07-08</lastmod>
                <changefreq>monthly</changefreq>
                <priority>0.6</priority>
            </url>
        EOF
        
        # å‹•æ…‹æ·»åŠ æ‰€æœ‰ HTML é é¢åˆ° sitemap
        for html_file in *.html; do
          if [[ "$html_file" != "index.html" && "$html_file" != "about.html" && "$html_file" != "contributing.html" && "$html_file" != "privacy.html" ]]; then
            if [[ "$html_file" == tools-* ]]; then
              priority="0.6"
            elif [[ "$html_file" == geo-fundamentals* ]]; then
              priority="0.9"
            else
              priority="0.8"
            fi
            
            cat >> sitemap.xml << EOF
            <url>
                <loc>https://bless25min.github.io/AIOGEO-Knowledge/$html_file</loc>
                <lastmod>2025-07-08</lastmod>
                <changefreq>weekly</changefreq>
                <priority>$priority</priority>
            </url>
        EOF
          fi
        done
        
        echo "</urlset>" >> sitemap.xml
        
        echo "âœ… ç”Ÿæˆäº†åŒ…å« $(grep -c "<url>" sitemap.xml) å€‹é é¢çš„å®Œæ•´ sitemap"

    - name: ğŸ“Š Generate fix report
      run: |
        echo "ğŸ“Š ç”Ÿæˆä¿®æ­£å ±å‘Š..."
        
        cat > link-fix-report.txt << 'EOF'
        ğŸ”„ AIOGEO çŸ¥è­˜åº«é€£çµä¿®æ­£å ±å‘Š
        ===================================
        
        ğŸ“… ä¿®æ­£æ™‚é–“ï¼š2025-07-08
        ğŸ¯ ç›®æ¨™ï¼šçµ±ä¸€æ‰€æœ‰é€£çµç‚ºéœæ…‹ HTML æ ¼å¼
        
        ğŸ”§ ä¿®æ­£ç¯„åœï¼š
        âœ… æ‰€æœ‰ HTML æª”æ¡ˆä¸­çš„ hash é€£çµ
        âœ… æ‰€æœ‰ Markdown æª”æ¡ˆä¸­çš„é€£çµ
        âœ… å°èˆªå´é‚Šæ¬„ (_sidebar.md)
        âœ… å»ºç«‹ç¼ºå°‘çš„éœæ…‹é é¢
        
        ğŸ“„ å»ºç«‹çš„éœæ…‹é é¢ï¼š
        EOF
        
        echo "æ–‡ç« é é¢ï¼š" >> link-fix-report.txt
        for html_file in *.html; do
          if [[ "$html_file" != "index.html" && "$html_file" != "about.html" && "$html_file" != "contributing.html" && "$html_file" != "privacy.html" && "$html_file" != tools-* ]]; then
            echo "- $html_file" >> link-fix-report.txt
          fi
        done
        
        echo "" >> link-fix-report.txt
        echo "å·¥å…·é é¢ï¼š" >> link-fix-report.txt
        for html_file in tools-*.html; do
          if [ -f "$html_file" ]; then
            echo "- $html_file" >> link-fix-report.txt
          fi
        done
        
        cat >> link-fix-report.txt << 'EOF'
        
        ğŸ”— é€£çµæ ¼å¼çµ±ä¸€ï¼š
        âŒ èˆŠæ ¼å¼ï¼š#/about, #/posts/article, #/tools/tool
        âœ… æ–°æ ¼å¼ï¼šabout.html, article.html, tools-tool.html
        
        ğŸ“Š ä¿®æ­£çµ±è¨ˆï¼š
        âœ… HTML æª”æ¡ˆï¼šæ‰€æœ‰æª”æ¡ˆå·²ä¿®æ­£
        âœ… Markdown æª”æ¡ˆï¼šposts/*, tools/*, *.md å·²ä¿®æ­£
        âœ… å°èˆªçµæ§‹ï¼š_sidebar.md å·²æ›´æ–°
        âœ… Sitemapï¼šåŒ…å«æ‰€æœ‰éœæ…‹é é¢
        
        ğŸ¯ æ•ˆæœé æœŸï¼š
        ğŸ“ˆ è§£æ±ºæ‰€æœ‰ 404 éŒ¯èª¤
        ğŸ“ˆ çµ±ä¸€é€£çµæ ¼å¼
        ğŸ“ˆ æå‡ SEO å‹å–„åº¦
        ğŸ“ˆ æ”¹å–„ AI å¼•ç”¨ç‡
        
        ğŸŒ æ‰€æœ‰é é¢ç¾åœ¨éƒ½ä½¿ç”¨çµ±ä¸€çš„éœæ…‹ HTML é€£çµæ ¼å¼ï¼
        EOF
        
        cat link-fix-report.txt

    - name: ğŸš€ Commit all fixes
      run: |
        echo "ğŸš€ æäº¤æ‰€æœ‰ä¿®æ­£..."
        
        # æª¢æŸ¥è®Šæ›´
        if [ -n "$(git status --porcelain)" ]; then
          echo "ğŸ“ æäº¤æ‰€æœ‰è®Šæ›´..."
          
          git add .
          
          git commit -m "ğŸ”„ å®Œæ•´é€£çµä¿®æ­£ï¼šçµ±ä¸€ç‚ºéœæ…‹HTMLæ ¼å¼

          ğŸ¯ é‡å¤§ä¿®æ­£:
          âœ… ä¿®æ­£æ‰€æœ‰ HTML æª”æ¡ˆä¸­çš„ hash é€£çµ
          âœ… ä¿®æ­£æ‰€æœ‰ Markdown æª”æ¡ˆä¸­çš„é€£çµ  
          âœ… æ›´æ–°å°èˆªå´é‚Šæ¬„ (_sidebar.md)
          âœ… å»ºç«‹æ‰€æœ‰ç¼ºå°‘çš„éœæ…‹é é¢
          âœ… ç”Ÿæˆå®Œæ•´çš„ sitemap.xml
          
          ğŸ“Š ä¿®æ­£çµ±è¨ˆ:
          - HTML æª”æ¡ˆ: $(ls -1 *.html 2>/dev/null | wc -l) å€‹å·²ä¿®æ­£
          - æ–‡ç« é é¢: $(ls -1 *.html 2>/dev/null | grep -v -E "(index|about|contributing|privacy|tools-)" | wc -l) å€‹å·²å»ºç«‹
          - å·¥å…·é é¢: $(ls -1 tools-*.html 2>/dev/null | wc -l) å€‹å·²å»ºç«‹
          - Markdown æª”æ¡ˆ: å…¨éƒ¨å·²ä¿®æ­£é€£çµæ ¼å¼
          
          ğŸ”— é€£çµæ ¼å¼çµ±ä¸€:
          âŒ èˆŠ: #/about, #/posts/*, #/tools/*
          âœ… æ–°: about.html, *.html, tools-*.html
          
          ğŸ“ˆ é æœŸæ•ˆæœ:
          - ğŸ”§ è§£æ±ºæ‰€æœ‰ 404 éŒ¯èª¤
          - ğŸ” æå‡ Google æ”¶éŒ„ç‡
          - ğŸ¤– æ”¹å–„ AI å¼•ç”¨è¡¨ç¾
          - ğŸš€ çµ±ä¸€ä½¿ç”¨è€…é«”é©—
          
          ä¿®æ­£æ™‚é–“: $(date)"
          
          echo "ğŸ“¤ æ¨é€è®Šæ›´..."
          git push origin main
          
          echo "âœ… æ‰€æœ‰é€£çµä¿®æ­£å·²å®Œæˆä¸¦æ¨é€ï¼"
        else
          echo "â„¹ï¸ æ²’æœ‰æª”æ¡ˆéœ€è¦ä¿®æ­£"
        fi

    - name: ğŸ‰ Fix completion notification
      run: |
        echo "ğŸ‰ é€£çµä¿®æ­£å®Œæˆï¼"
        echo ""
        echo "âœ… å·²å®Œæˆçš„ä¿®æ­£ï¼š"
        echo "  ğŸ”— æ‰€æœ‰ HTML æª”æ¡ˆé€£çµå·²çµ±ä¸€"
        echo "  ğŸ“ æ‰€æœ‰ Markdown æª”æ¡ˆé€£çµå·²ä¿®æ­£"
        echo "  ğŸ—ºï¸ å°èˆªå´é‚Šæ¬„å·²æ›´æ–°"
        echo "  ğŸ“„ ç¼ºå°‘çš„éœæ…‹é é¢å·²å»ºç«‹"
        echo "  ğŸ—ºï¸ å®Œæ•´ sitemap å·²ç”Ÿæˆ"
        echo ""
        echo "ğŸ¯ ä¿®æ­£æ•ˆæœï¼š"
        echo "  âŒ æ¶ˆé™¤æ‰€æœ‰ hash è·¯ç”±è¡çª"
        echo "  âœ… çµ±ä¸€éœæ…‹ HTML é€£çµæ ¼å¼"
        echo "  ğŸ“Š å»ºç«‹å®Œæ•´çš„é é¢æ¶æ§‹"
        echo "  ğŸ” å„ªåŒ– SEO æ”¶éŒ„è¡¨ç¾"
        echo ""
        echo "ğŸŒ æ¸¬è©¦å»ºè­°ï¼š"
        echo "  1. ç­‰å¾… GitHub Pages éƒ¨ç½² (5-10 åˆ†é˜)"
        echo "  2. æ¸¬è©¦æ‰€æœ‰å°èˆªé€£çµæ˜¯å¦æ­£å¸¸"
        echo "  3. ç¢ºèªéœæ…‹é é¢è¼‰å…¥æ­£ç¢º"
        echo "  4. æäº¤æ–° sitemap åˆ° Google Search Console"
        echo ""
        echo "ğŸŠ æ­å–œï¼AIOGEO çŸ¥è­˜åº«ç¾åœ¨å®Œå…¨ä½¿ç”¨çµ±ä¸€çš„éœæ…‹é€£çµæ¶æ§‹ï¼"
